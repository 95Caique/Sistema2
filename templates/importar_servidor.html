{% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="main-body">
        <h1>Lista de Servidores</h1>

        <form method="POST" action="{% url 'importar-servidor' %}" class="mb-4">
            {% csrf_token %}
            <div class="input-group">
                <input type="text" name="identificador" class="form-control" placeholder="Digite CPF ou matrícula"
                       required>
                <button type="submit" class="btn btn-primary">Importar Servidor</button>
            </div>
        </form>

        {% if servidor %}
        <div class="container">
            <div class="main-body">
                <div class="row gutters-sm">
                    <div class="col-md-4 mb-3">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin"
                                         class="rounded-circle" width="150">
                                    <div class="mt-3">
                                        <h4>{{ servidor.nome }}</h4>
                                        <p class="text-secondary mb-1">{{servidor.funcao}}</p>
                                        <p class="text-muted font-size-sm">{{servidor.cidade}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-8">
                        <div class="card mb-3">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Matrícula</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        {{ servidor.matricula }}
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Email</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        {{ servidor.email }}
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Contato</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        {{ servidor.telefone }}
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <h6 class="mb-0">Lotação</h6>
                                    </div>
                                    <div class="col-sm-9 text-secondary">
                                        {{ servidor.cidade }}
                                    </div>
                                </div>
                                <hr>
                                <!-- Botão para limpar os dados importados -->
                                <div class="text-center">
                                    <button class="btn btn-danger" onclick="limparServidor()">Limpar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% elif error %}
        <div class="alert alert-danger mt-3">{{ error }}</div>
        {% endif %}
    </div>
</div>

<script>
    function limparServidor() {
        window.location.href = "{% url 'importar-servidor' %}";  // Recarrega a página limpando os dados
    }
</script>

{% endblock %}
